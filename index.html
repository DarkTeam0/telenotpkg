<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Referral & OTP System</title>
<style>
  body {
    margin: 0;
    font-family: 'Courier New', monospace;
    background-color: #0d0d0d;
    color: #00ff00;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
  }

  h1 {
    font-size: 2.5em;
    text-shadow: 0 0 5px #0f0,0 0 10px #0f0,0 0 20px #0f0;
    margin-bottom: 30px;
  }

  button {
    background: linear-gradient(90deg,#00ff00,#00aa00);
    border: none;
    padding: 15px 40px;
    font-size: 20px;
    color: #0d0d0d;
    cursor: pointer;
    border-radius: 10px;
    margin: 10px;
    transition: 0.3s;
  }

  button:hover {
    transform: scale(1.1);
    box-shadow: 0 0 20px #0f0,0 0 40px #0f0 inset;
  }

  input {
    padding: 10px;
    font-size: 18px;
    border-radius: 8px;
    border: none;
    margin-bottom: 20px;
    text-align: center;
  }

  #otpDisplay {
    font-size: 50px;
    letter-spacing: 10px;
    margin-top: 20px;
    font-weight: bold;
    text-shadow: 0 0 10px #0f0,0 0 20px #0f0,0 0 40px #0f0;
    animation: glow 1.5s infinite alternate;
  }

  @keyframes glow {
    from { text-shadow: 0 0 10px #0f0,0 0 20px #0f0;}
    to { text-shadow: 0 0 20px #0f0,0 0 40px #0f0,0 0 60px #0f0;}
  }

  #telegramBtn {
    background: #0088cc;
    color: #fff;
  }

</style>
</head>
<body>

<div id="referralPage">
  <h1>Referral System</h1>
  <p id="counter">0/3 referrals completed</p>
  <button onclick="addReferral()">Simulate Referral</button>
  <button id="telegramBtn" onclick="openTelegram()">Join Telegram</button>
</div>

<div id="numberPage" style="display:none;">
  <h1>Enter Your Number</h1>
  <input type="text" id="phoneNumber" placeholder="Enter Number">
  <button onclick="goToOTP()">Continue</button>
  <button id="telegramBtn" onclick="openTelegram()">Join Telegram</button>
</div>

<div id="otpPage" style="display:none;">
  <h1>OTP Generator</h1>
  <button onclick="generateOTP()">Generate OTP</button>
  <div id="otpDisplay">------</div>
  <p>Copy this OTP to main site</p>
  <button id="telegramBtn" onclick="openTelegram()">Join Telegram</button>
</div>

<script>
// === Referral link check ===
function checkReferral() {
    const urlParams = new URLSearchParams(window.location.search);
    const ref = urlParams.get('ref'); // ?ref=CODE
    if(!ref || ref === "") {
        alert("Access Denied! Referral link se hi open karein.");
        window.location.href = "https://akmods-akhackers-projects.vercel.app/"; // redirect
    } else {
        console.log("Referral detected:", ref);
    }
}
checkReferral(); // Page load me check

// === Referral counter system ===
let referrals = 0;
function addReferral() {
  referrals++;
  document.getElementById('counter').innerText = referrals + "/3 referrals completed";
  if(referrals >= 3){
    alert("Referral complete! Continue to number page.");
    document.getElementById('referralPage').style.display = "none";
    document.getElementById('numberPage').style.display = "block";
  }
}

// === Number page to OTP page ===
function goToOTP() {
  let number = document.getElementById('phoneNumber').value;
  if(number.length < 5){
    alert("Enter a valid number!");
    return;
  }
  localStorage.setItem('userNumber', number);
  document.getElementById('numberPage').style.display = "none";
  document.getElementById('otpPage').style.display = "block";
}

// === OTP generator ===
function generateOTP() {
  let otp = Math.floor(100000 + Math.random() * 900000);
  document.getElementById('otpDisplay').innerText = otp;
  localStorage.setItem('generatedOTP', otp);
}

// === Telegram button ===
function openTelegram() {
  window.open('https://akmods-akhackers-projects.vercel.app/', '_blank');
}
</script>

</body>
</html>
